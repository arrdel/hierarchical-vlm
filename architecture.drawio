<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-12-18T00:00:00.000Z" agent="Mozilla/5.0" etag="hierarchical_vlm_technical" version="24.0.0" type="device">
  <diagram id="technical_architecture" name="HierarchicalVLM - Technical Architecture">
    <mxGraphModel dx="2000" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2400" pageHeight="1400" shadow="1">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- TITLE -->
        <mxCell id="main_title" value="HierarchicalVLM: Technical Architecture Breakdown" style="text;html=1;fontSize=28;fontStyle=1;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="50" y="10" width="2300" height="40" as="geometry"/>
        </mxCell>
        
        <!-- ==================== PHASE 0: VIDEO INPUT ==================== -->
        <mxCell id="phase0_title" value="PHASE 0: VIDEO INPUT" style="text;html=1;fontSize=13;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF6B00;" vertex="1" parent="1">
          <mxGeometry x="50" y="65" width="180" height="25" as="geometry"/>
        </mxCell>
        
        <mxCell id="input_container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE5CC;strokeColor=#FF6B00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="95" width="180" height="140" as="geometry"/>
        </mxCell>
        
        <mxCell id="input_video" value="Video Sequence" style="text;html=1;fontSize=11;fontStyle=1;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="180" height="25" as="geometry"/>
        </mxCell>
        
        <mxCell id="input_frames" value="T frames" style="text;html=1;fontSize=10;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="50" y="130" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="input_extraction" value="Feature Extraction" style="text;html=1;fontSize=10;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#666;" vertex="1" parent="1">
          <mxGeometry x="50" y="155" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="input_shape" value="Output: T x 2048" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF6B00;backgroundColor=#FFFACD;" vertex="1" parent="1">
          <mxGeometry x="50" y="180" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- Arrow Input -> Phase 1 -->
        <mxCell id="arrow_input_phase1" edge="1" parent="1" source="input_container" target="phase1_container">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== PHASE 1: TEMPORAL CONTRASTIVE LEARNING ==================== -->
        <mxCell id="phase1_title" value="PHASE 1: TEMPORAL CONTRASTIVE LEARNING" style="text;html=1;fontSize=13;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#0066CC;" vertex="1" parent="1">
          <mxGeometry x="280" y="65" width="280" height="25" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#0066CC;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="280" y="95" width="280" height="440" as="geometry"/>
        </mxCell>
        
        <!-- Encoder -->
        <mxCell id="phase1_encoder_label" value="Temporal Encoder" style="text;html=1;fontSize=10;fontStyle=1;align=center;fillColor=#CCE5FF;strokeColor=#0066CC;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="290" y="105" width="260" height="20" as="geometry"/>
        </mxCell>
        
        <!-- Layer 1 -->
        <mxCell id="phase1_l1_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F2FF;strokeColor=#0066CC;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="135" width="240" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_l1_title" value="Layer 1: Transformer Block" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="300" y="140" width="240" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_l1_attention" value="Multi-Head Attention: 8 heads" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="300" y="158" width="110" height="14" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_l1_hidden" value="Hidden: 1024-D" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="300" y="175" width="110" height="14" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_l1_ff" value="Feed-Forward: x2 hidden" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="415" y="158" width="125" height="14" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_l1_output" value="Output: T x 1024" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#0066CC;backgroundColor=#E6F2FF;" vertex="1" parent="1">
          <mxGeometry x="415" y="175" width="125" height="14" as="geometry"/>
        </mxCell>
        
        <!-- Layer 2-6 -->
        <mxCell id="phase1_l2_6_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6F2FF;strokeColor=#0066CC;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="205" width="240" height="50" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_l2_6_title" value="Layers 2-6: Repeat" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="300" y="210" width="240" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_l2_6_desc" value="5x (Multi-Head Attn + Feed-Forward) | Output: T x 1024" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="300" y="230" width="240" height="20" as="geometry"/>
        </mxCell>
        
        <!-- Contrastive Loss -->
        <mxCell id="phase1_loss_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6E6;strokeColor=#FF0000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="300" y="270" width="240" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_loss_title" value="Temporal Contrastive Loss" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="300" y="275" width="240" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_loss_formula" value="Loss = Temporal Consistency" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="300" y="293" width="240" height="14" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_loss_sim" value="sim(h_t, h_t+1) for adjacent frames" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="300" y="310" width="240" height="14" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_loss_collapse" value="+ Variance Regularization: prevent collapse" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="300" y="327" width="240" height="14" as="geometry"/>
        </mxCell>
        
        <!-- Status -->
        <mxCell id="phase1_status" value="Status: Trainable (Full Backprop)" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;backgroundColor=#FFE6E6;" vertex="1" parent="1">
          <mxGeometry x="300" y="360" width="240" height="18" as="geometry"/>
        </mxCell>
        
        <!-- Output -->
        <mxCell id="phase1_output_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D4E4FF;strokeColor=#0066CC;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="300" y="390" width="240" height="40" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_output_title" value="Output: Consistent Temporal Representations" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#0066CC;" vertex="1" parent="1">
          <mxGeometry x="300" y="395" width="240" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase1_output_shape" value="Shape: T x 1024" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#0066CC;" vertex="1" parent="1">
          <mxGeometry x="300" y="415" width="240" height="12" as="geometry"/>
        </mxCell>
        
        <!-- Arrow Phase 1 -> Phase 2 -->
        <mxCell id="arrow_phase1_phase2" edge="1" parent="1" source="phase1_output_box" target="phase2_container">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== PHASE 2: HIERARCHICAL AGGREGATION ==================== -->
        <mxCell id="phase2_title" value="PHASE 2: HIERARCHICAL AGGREGATION" style="text;html=1;fontSize=13;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#00AA00;" vertex="1" parent="1">
          <mxGeometry x="620" y="65" width="280" height="25" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#00AA00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="620" y="95" width="280" height="440" as="geometry"/>
        </mxCell>
        
        <!-- Input to Phase 2 -->
        <mxCell id="phase2_input_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#00AA00;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="105" width="260" height="35" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_input_title" value="Input: T x 1024 (250 tokens)" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#00AA00;" vertex="1" parent="1">
          <mxGeometry x="630" y="110" width="260" height="24" as="geometry"/>
        </mxCell>
        
        <!-- Hierarchical Levels -->
        <mxCell id="phase2_level1_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#00AA00;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="155" width="260" height="50" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_level1_title" value="Level 1: Attention-Weighted Pooling" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#00AA00;" vertex="1" parent="1">
          <mxGeometry x="630" y="160" width="260" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_level1_formula" value="h_j = sum(alpha_i * h_i) / sum(alpha_i) | 250 - 125" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="630" y="178" width="260" height="22" as="geometry"/>
        </mxCell>
        
        <!-- Arrow -->
        <mxCell id="phase2_arrow1" edge="1" parent="1" source="phase2_level1_box" target="phase2_level2_box">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_level2_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#00AA00;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="220" width="260" height="50" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_level2_title" value="Level 2-6: Hierarchical Pooling" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#00AA00;" vertex="1" parent="1">
          <mxGeometry x="630" y="225" width="260" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_level2_formula" value="125 - 62 - 31 - 15 - 7 - 3 - 1" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="630" y="243" width="260" height="22" as="geometry"/>
        </mxCell>
        
        <!-- Arrow -->
        <mxCell id="phase2_arrow2" edge="1" parent="1" source="phase2_level2_box" target="phase2_memory_box">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Memory Analysis -->
        <mxCell id="phase2_memory_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6E6;strokeColor=#FF0000;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="630" y="285" width="260" height="70" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_memory_title" value="Memory Complexity Reduction" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="630" y="290" width="260" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_memory_before" value="Before: O(T^2) = 250^2 = 62,500" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="630" y="308" width="260" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_memory_after" value="After: O(T) ≈ 1" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="630" y="323" width="260" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_memory_ratio" value="Reduction: 62,500x ≈ 130x effective" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="630" y="338" width="260" height="12" as="geometry"/>
        </mxCell>
        
        <!-- Status -->
        <mxCell id="phase2_status" value="Status: Trainable (Full Backprop)" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;backgroundColor=#FFE6E6;" vertex="1" parent="1">
          <mxGeometry x="630" y="370" width="260" height="18" as="geometry"/>
        </mxCell>
        
        <!-- Output -->
        <mxCell id="phase2_output_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D4F0D4;strokeColor=#00AA00;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="630" y="400" width="260" height="40" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_output_title" value="Output: Compressed Representations" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#00AA00;" vertex="1" parent="1">
          <mxGeometry x="630" y="405" width="260" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase2_output_shape" value="Shape: 1 x 1024 (Global Feature)" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#00AA00;" vertex="1" parent="1">
          <mxGeometry x="630" y="425" width="260" height="12" as="geometry"/>
        </mxCell>
        
        <!-- Arrow Phase 2 -> Phase 3 -->
        <mxCell id="arrow_phase2_phase3" edge="1" parent="1" source="phase2_output_box" target="phase3_container">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
          </mxGeometry>
        </mxCell>
        
        <!-- ==================== PHASE 3: VISION-LANGUAGE ALIGNMENT ==================== -->
        <mxCell id="phase3_title" value="PHASE 3: VISION-LANGUAGE ALIGNMENT (Optional)" style="text;html=1;fontSize=13;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="960" y="65" width="300" height="25" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#9933CC;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="960" y="95" width="300" height="440" as="geometry"/>
        </mxCell>
        
        <!-- Video Branch -->
        <mxCell id="phase3_video_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#9933CC;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="975" y="105" width="130" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_video_title" value="Video Branch" style="text;html=1;fontSize=10;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="975" y="110" width="130" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_video_input" value="From Phase 2:" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="975" y="130" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_video_shape" value="1 x 1024" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="975" y="145" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_video_proj" value="Projection Layer:" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="975" y="162" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_video_proj_shape" value="1024 - 256-D" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="975" y="177" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <!-- Text Branch -->
        <mxCell id="phase3_text_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#9933CC;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1115" y="105" width="130" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_text_title" value="Text Branch" style="text;html=1;fontSize=10;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="1115" y="110" width="130" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_text_input" value="Caption Tokens:" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1115" y="130" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_text_encoder" value="Text Encoder" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="1115" y="145" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_text_shape" value="Seq x 512" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="1115" y="162" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_text_proj" value="Pool + Project:" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1115" y="177" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_text_proj_shape" value="512 - 256-D" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="1115" y="192" width="130" height="12" as="geometry"/>
        </mxCell>
        
        <!-- Arrow between branches -->
        <mxCell id="phase3_arrow_branches" edge="1" parent="1" source="phase3_video_box" target="phase3_alignment_box">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Alignment Loss -->
        <mxCell id="phase3_alignment_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6E6;strokeColor=#FF0000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="975" y="230" width="270" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_alignment_title" value="Contrastive Alignment Loss" style="text;html=1;fontSize=10;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="975" y="235" width="270" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_alignment_method" value="Method: InfoNCE Loss" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="975" y="255" width="270" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_alignment_temp" value="Temperature Scaling: tau_t = 0.05" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="975" y="270" width="270" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_alignment_sim" value="Similarity: cos_sim(v_proj, t_proj)" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="975" y="285" width="270" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_alignment_margin" value="Margin-based ranking loss" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="975" y="300" width="270" height="12" as="geometry"/>
        </mxCell>
        
        <!-- Status -->
        <mxCell id="phase3_status" value="Status: Trainable (Optional)" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;backgroundColor=#FFE6E6;" vertex="1" parent="1">
          <mxGeometry x="975" y="345" width="270" height="18" as="geometry"/>
        </mxCell>
        
        <!-- Output -->
        <mxCell id="phase3_output_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8DFF5;strokeColor=#9933CC;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="975" y="380" width="270" height="50" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_output_title" value="Output: Vision-Language Aligned Embeddings" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="975" y="385" width="270" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="phase3_output_shape" value="Video: 256-D | Text: 256-D (Aligned Space)" style="text;html=1;fontSize=8;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#9933CC;" vertex="1" parent="1">
          <mxGeometry x="975" y="405" width="270" height="12" as="geometry"/>
        </mxCell>
        
        <!-- ==================== FINAL OUTPUT ==================== -->
        <mxCell id="final_title" value="FINAL OUTPUT" style="text;html=1;fontSize=13;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1330" y="65" width="200" height="25" as="geometry"/>
        </mxCell>
        
        <!-- Arrow Phase 3 -> Final -->
        <mxCell id="arrow_phase3_final" edge="1" parent="1" source="phase3_output_box" target="final_output">
          <mxGeometry relative="1" as="geometry">
            <Array as="points"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Alternative Arrow Phase 2 -> Final (if no Phase 3) -->
        <mxCell id="arrow_phase2_final" edge="1" parent="1" source="phase2_output_box" target="final_output">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="950" y="420"/>
              <mxPoint x="1330" y="420"/>
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="final_output" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE5E5;strokeColor=#FF0000;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="1330" y="100" width="200" height="350" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_title_content" value="Final Embeddings" style="text;html=1;fontSize=11;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1330" y="110" width="200" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_options" value="Option A: Phase 2 Output" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="1330" y="140" width="200" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_option_a" value="Video Embedding Only: 1 x 1024" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="160" width="200" height="25" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_divider" value="---" style="text;html=1;fontSize=12;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="190" width="200" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_options_b" value="Option B: Phase 3 Output" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#333;" vertex="1" parent="1">
          <mxGeometry x="1330" y="210" width="200" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_option_b_video" value="Video: 256-D (aligned)" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="230" width="200" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_option_b_text" value="Text: 256-D (aligned)" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="247" width="200" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_benefits" value="Benefits:" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1330" y="270" width="200" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_benefit1" value="Cross-modal retrieval" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="288" width="200" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_benefit2" value="Temporal action localization" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="303" width="200" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_benefit3" value="Video-text matching" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="318" width="200" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_downstream" value="Downstream Tasks:" style="text;html=1;fontSize=9;fontStyle=1;align=center;fillColor=none;strokeColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1330" y="338" width="200" height="15" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_task1" value="Classification" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1330" y="356" width="60" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_task2" value="Retrieval" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1400" y="356" width="60" height="12" as="geometry"/>
        </mxCell>
        
        <mxCell id="final_task3" value="Clustering" style="text;html=1;fontSize=8;align=center;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="1470" y="356" width="60" height="12" as="geometry"/>
        </mxCell>
        
        <!-- ==================== BOTTOM LEGEND ==================== -->
        <mxCell id="legend_title" value="LEGEND" style="text;html=1;fontSize=11;fontStyle=1;align=left;fillColor=none;strokeColor=none;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="50" y="570" width="100" height="20" as="geometry"/>
        </mxCell>
        
        <mxCell id="legend_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#999;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="595" width="1480" height="150" as="geometry"/>
        </mxCell>
        
        <mxCell id="legend_content" value="Input (Orange): Raw video features extracted from frames&#10;Phase 1 (Blue): Temporal Contrastive Learning - learns consistent representations | Trainable: YES | Memory: T x 1024&#10;Phase 2 (Green): Hierarchical Aggregation - compresses T tokens to 1 using attention | Trainable: YES | Memory Reduction: 130x&#10;Phase 3 (Purple): Vision-Language Alignment - aligns video and text embeddings | Trainable: YES | Optional: YES&#10;Output (Red): Final embeddings ready for downstream tasks | Can use either Phase 2 or Phase 3 output&#10;&#10;Token Flow: 250 frames - Extract Features (2048-D) - Encoder (1024-D) - Hierarchical Pool (250-125-62-31-15-7-3-1) - Optional Projection (256-D)&#10;Loss Functions: L_temporal (contrastive) + L_reg (variance) + L_vlm (vision-language, optional)" style="text;html=1;fontSize=7;align=left;verticalAlign=top;fillColor=none;strokeColor=none;fontColor=#333;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="60" y="605" width="1460" height="130" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>